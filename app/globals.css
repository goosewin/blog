@import 'tailwindcss';

@plugin '@tailwindcss/typography';

:root {
  color-scheme: light;
  --color-bg: #f6f8ff;
  --color-surface: #ffffff;
  --color-elevated: #eef2ff;
  --color-border: rgba(15, 23, 42, 0.08);
  --color-border-strong: rgba(15, 23, 42, 0.16);
  --color-text: #0f172a;
  --color-text-muted: #475569;
  --color-accent: #2563eb;
  --color-accent-foreground: #f8fbff;
  --color-accent-soft: rgba(37, 99, 235, 0.14);
  --shadow-soft: 0 22px 48px -32px rgba(15, 23, 42, 0.35);
  --shadow-inner: inset 0 1px 0 rgba(255, 255, 255, 0.6);
  --radius-xl: 32px;
  --radius-lg: 24px;
  --radius-md: 18px;
  --radius-sm: 12px;
  --space-xs: 0.5rem;
  --space-sm: 0.75rem;
  --space-md: 1.25rem;
  --space-lg: 1.75rem;
  --space-xl: 2.5rem;
}

html[data-theme='dark'] {
  color-scheme: dark;
  --color-bg: #040712;
  --color-surface: #0b1220;
  --color-elevated: #111a2d;
  --color-border: rgba(148, 163, 184, 0.16);
  --color-border-strong: rgba(148, 163, 184, 0.28);
  --color-text: #e2e8f0;
  --color-text-muted: #94a3b8;
  --color-accent: #60a5fa;
  --color-accent-foreground: #041024;
  --color-accent-soft: rgba(96, 165, 250, 0.22);
  --shadow-soft: 0 28px 54px -34px rgba(2, 6, 23, 0.7);
  --shadow-inner: inset 0 1px 0 rgba(15, 23, 42, 0.6);
}

@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-border);
  }
}

@layer base {
  html {
    font-family: 'Space Grotesk', sans-serif;
    @apply text-base antialiased;
  }

  body {
    min-height: 100vh;
    background-color: var(--color-bg);
    color: var(--color-text);
    font-size: clamp(1rem, 0.96rem + 0.3vw, 1.1rem);
    line-height: 1.7;
    transition:
      background-color 0.3s ease,
      color 0.3s ease;
  }

  .skip-link {
    @apply sr-only focus-visible:not-sr-only focus-visible:fixed focus-visible:left-4 focus-visible:top-4 focus-visible:z-50 focus-visible:rounded-full focus-visible:px-4 focus-visible:py-2 focus-visible:text-sm focus-visible:font-semibold focus-visible:shadow-lg;
    background-color: var(--color-accent);
    color: var(--color-accent-foreground);
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-medium leading-tight mb-4;
    color: var(--color-text);
  }

  h1 {
    font-size: clamp(2.5rem, 2.2rem + 1.2vw, 3.5rem);
  }

  h2 {
    font-size: clamp(2rem, 1.8rem + 0.9vw, 2.75rem);
  }

  h3 {
    font-size: clamp(1.75rem, 1.6rem + 0.6vw, 2.2rem);
  }

  h4 {
    font-size: clamp(1.35rem, 1.25rem + 0.4vw, 1.75rem);
  }

  h5 {
    font-size: clamp(1.2rem, 1.1rem + 0.3vw, 1.5rem);
  }

  h6 {
    font-size: clamp(1.05rem, 1rem + 0.2vw, 1.3rem);
  }

  p {
    @apply mb-4 leading-relaxed;
    color: var(--color-text-muted);
  }

  button,
  a.nav-link,
  a.title-link {
    @apply transition-opacity duration-200;
  }

  a:not(.nav-link):not(.title-link) {
    color: var(--color-accent);
    transition: opacity 0.2s ease;
  }

  a:not(.nav-link):not(.title-link):hover {
    opacity: 0.82;
  }

  a.underline-link {
    border-bottom: 1px solid var(--color-border);
    transition: opacity 0.2s ease;
  }

  a.underline-link:hover {
    opacity: 0.82;
  }

  sup .ref-link {
    font-size: 0.85em;
    color: var(--color-text-muted);
    background-color: var(--color-accent-soft);
    text-decoration: none !important;
    border-bottom: none !important;
    margin-left: 3px;
    padding: 2px 6px;
    border-radius: 999px;
    transition: background-color 0.2s ease;
    display: inline-block;
    line-height: 1;
  }

  sup .ref-link:hover {
    background-color: var(--color-accent);
    color: var(--color-accent-foreground);
  }

  .references-accordion {
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    overflow: hidden;
    margin: 1rem 0;
    background-color: var(--color-surface);
  }

  .references-accordion summary {
    padding: 1rem;
    cursor: pointer;
    font-weight: 500;
    user-select: none;
    transition: background-color 0.2s ease;
    list-style: none;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .references-accordion summary::-webkit-details-marker {
    display: none;
  }

  .references-accordion summary::after {
    content: 'â–¼';
    font-size: 0.8em;
    color: var(--color-text-muted);
    transition: transform 0.3s ease;
  }

  .references-accordion[open] summary::after {
    transform: rotate(180deg);
  }

  .references-accordion summary:hover {
    background-color: var(--color-accent-soft);
  }

  .references-accordion .references-content {
    padding: 1rem;
    background-color: var(--color-surface);
    animation: slideDown 0.3s ease-out;
  }

  .references-accordion .references-content > div {
    margin-bottom: 0.75rem;
    line-height: 1.5;
    color: var(--color-text-muted);
  }

  .references-accordion .references-content > div:last-child {
    margin-bottom: 0;
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}

@layer utilities {
  .bg-app {
    background-color: var(--color-bg);
  }

  .bg-surface {
    background-color: var(--color-surface);
  }

  .bg-elevated {
    background-color: var(--color-elevated);
  }

  .bg-accent {
    background-color: var(--color-accent);
    color: var(--color-accent-foreground);
  }

  .text-muted {
    color: var(--color-text-muted);
  }

  .text-accent {
    color: var(--color-accent);
  }

  .text-strong {
    color: var(--color-text);
  }

  .border-subtle {
    border-color: var(--color-border);
  }

  .border-strong {
    border-color: var(--color-border-strong);
  }

  .shadow-soft {
    box-shadow: var(--shadow-soft);
  }

  .shadow-inner-soft {
    box-shadow: var(--shadow-inner);
  }

  .surface-translucent {
    background-color: color-mix(
      in srgb,
      var(--color-elevated) 72%,
      transparent
    );
    border-color: color-mix(in srgb, var(--color-border) 45%, transparent);
    backdrop-filter: blur(18px);
    -webkit-backdrop-filter: blur(18px);
  }
}

.text-balance {
  text-wrap: balance;
}

@layer base {
  ::view-transition-old(main-content),
  ::view-transition-new(main-content) {
    animation-duration: 0.4s;
    animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }

  ::view-transition-old(main-content) {
    animation: slide-out-to-left 0.4s cubic-bezier(0.4, 0, 0.2, 1) both;
  }

  ::view-transition-new(main-content) {
    animation: slide-in-from-right 0.4s cubic-bezier(0.4, 0, 0.2, 1) both;
  }

  @keyframes slide-out-to-left {
    from {
      opacity: 1;
      transform: translateX(0);
    }

    to {
      opacity: 0;
      transform: translateX(-30px);
    }
  }

  @keyframes slide-in-from-right {
    from {
      opacity: 0;
      transform: translateX(30px);
    }

    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    ::view-transition-old(main-content),
    ::view-transition-new(main-content) {
      animation-duration: 0.01ms !important;
    }
  }
}
